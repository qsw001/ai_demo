I will create a new directory `SnakeFX` and implement the requested advanced Snake game with the following structure:

## 1. Directory Structure
*   `j:\ai_game\SnakeFX\`
    *   `index.html`: The entry point.
    *   `style.css`: Styling for the canvas and UI.
    *   `js\`: Directory for JavaScript modules (or a single script if preferred, but user asked to split).
        *   `main.js`: Game loop and initialization.
        *   `Game.js`: Manages game states (READY, RUNNING, OVER) and high-level logic.
        *   `Snake.js`: Player snake logic.
        *   `EnemySnake.js`: Enemy AI logic.
        *   `Food.js`: Food logic and animation.
        *   `ParticleSystem.js`: Particle effects for explosions/eating.
        *   `Input.js`: Keyboard handling.
        *   `Utils.js`: Helper functions (random, collision check).
        *   `Config.js`: Global configuration constants.

## 2. Core Modules Implementation Plan
*   **Game Loop**: Use `requestAnimationFrame` with `delta` time to ensure consistent speed regardless of frame rate.
*   **Snake Logic**:
    *   Array of `{x, y}` coordinates.
    *   Movement queue to prevent rapid key presses causing self-collision.
    *   `grow()` method.
*   **Enemy AI**:
    *   Simple heuristic: Try to move towards food or player, but check valid moves (no wall/self collision) first.
    *   Spawn logic: Timer-based spawning.
*   **Particle System**:
    *   Pool of particles to avoid GC overhead (optional optimization, or just simple array management for now).
    *   `explode(x, y, color)` method for death/eating effects.
*   **Visuals**:
    *   Canvas rendering.
    *   "Breathing" effect for food (scale using `Math.sin(time)`).
    *   Screen shake effect: Offset canvas context temporarily on impact.

## 3. Game State Machine
*   `GAME_READY`: Show "Press Space to Start".
*   `GAME_RUNNING`: Update all entities.
*   `GAME_OVER`: Stop updates, show "Game Over", allow restart.

## 4. Execution Steps
1.  **Create Directory**: `j:\ai_game\SnakeFX` and subfolders.
2.  **Create `index.html`**: Basic structure linking CSS and JS.
3.  **Create `style.css`**: Dark theme, centered canvas.
4.  **Create JS Modules**: Implement each class as defined above.
    *   Start with `Config.js` and `Utils.js`.
    *   Implement `Input.js`.
    *   Implement `ParticleSystem.js` early as it's a key requirement.
    *   Implement `Food.js`, `Snake.js`, `EnemySnake.js`.
    *   Implement `Game.js` to tie it all together.
    *   Implement `main.js` to bootstrap.
5.  **Integration**: Ensure modules import/export correctly (using ES6 modules).

## 5. Verification
*   Check basic movement.
*   Check particle effects on eating.
*   Check enemy spawning and AI behavior.
*   Check collision rules (Player vs Wall/Self/Enemy).
*   Check Game Over state and restart.

I will implement the "Screen Shake" enhancement as requested.
