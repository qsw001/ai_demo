I will implement the Game of Life in a single `index.html` file as requested.

## 1. HTML Structure
- **Layout**: A flex/grid layout with a control panel (top or side) and a main canvas area.
- **Controls**:
  - Buttons: Start/Pause, Step, Clear, Random.
  - Select/Radio: Boundary Mode (Bounded/Toroidal).
  - Select: Patterns (Glider, Blinker, etc.).
  - Range Input: Speed (simulation tick interval).
  - Legend/Instructions: Brief text explaining controls.

## 2. CSS Styling
- **Canvas**: Full responsiveness, handling `devicePixelRatio` for sharp rendering.
- **UI**: Clean, minimal styling for usability.
- **Cursor**: Visual feedback for "draw" vs "erase" modes (via Shift key).

## 3. JavaScript Architecture (Module Pattern)

### Data Structures & State
- **Buffers**: Two `Uint8Array`s (`curr`, `next`) for the grid state.
- **Grid Config**: `width`, `height`, `cellSize` (pixels).
- **State**: `isRunning`, `lastFrameTime`, `accumulator` (for speed control), `boundaryMode`.

### Core Logic
- **`idx(r, c)`**: Converts 2D coordinates to 1D index.
- **`countNeighbors(grid, r, c)`**: Calculates active neighbors based on the selected `boundaryMode`:
  - *Bounded*: Returns 0 for out-of-bounds neighbors.
  - *Toroidal*: Wraps coordinates using modulo arithmetic.
- **`step()`**: 
  - Iterates through the grid.
  - Applies B3/S23 rules.
  - Writes to `next`.
  - Swaps `curr` and `next` references at the end.

### Rendering (`Canvas 2D`)
- **`resizeCanvas()`**:
  - Adjusts internal `<canvas>` dimensions based on window size and `devicePixelRatio`.
  - Re-initializes grids if dimensions change (preserving data if feasible, or resetting if grid size changes drastically).
- **`render()`**:
  - Driven by `requestAnimationFrame`.
  - Clears the canvas.
  - Iterates `curr` buffer and draws live cells using `fillRect` (batching by color if needed, though simple rects are fast enough for typical sizes).

### Interaction
- **Pointer Events**: `pointerdown`, `pointermove` (throttled/gated by "is pressing"), `pointerup`.
- **Coordinate Mapping**: Accurately maps screen coordinates to grid row/col, accounting for CSS scaling and DPI.
- **Pattern Injection**: Functions to write specific patterns (Glider, Blinker) into the grid at specified offsets.

### Performance & Loop
- **Game Loop**: Standard `requestAnimationFrame` loop.
- **Time Step**: Uses an accumulator approach (`delta` time) to decouple simulation speed from framerate.

## 4. Implementation Steps
1.  **Scaffold**: Create the HTML shell and Canvas context setup.
2.  **Grid Logic**: Implement the 1D array mapping, neighbor counting, and rules.
3.  **Render Loop**: Implement the visual output.
4.  **Interaction**: Add mouse/touch listeners for drawing.
5.  **UI & Control**: Wire up buttons and speed sliders.
6.  **Refinement**: Tune performance and verify strict adherence to constraints (no float logic in rules, strict 8-neighbor count).
